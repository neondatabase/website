---
title: Use Neon Auth with Next.js (UI Components)
subtitle: Set up authentication in Next.js using pre-built UI components
enableTableOfContents: true
updatedOn: '2025-12-04T00:00:00.000Z'
layout: wide
---

This guide shows you how to integrate Neon Auth into a [Next.js](https://nextjs.org) (App Router) project using pre-built UI components. If you want to build your own UI, see the [API methods guide](/docs/auth/quick-start/nextjs-api-only).

<TwoColumnLayout>

<TwoColumnStep title="Enable Auth in your Neon project">
  <LeftContent>

Enable Auth in your [Neon project](https://console.neon.tech) and copy your Auth URL from Configuration.

**Console path:** Project → Branch → Auth → Configuration

  </LeftContent>
  <RightImage label="Console">

![Neon Auth Base URL](/docs/auth/neon-auth-base-url.png)

  </RightImage>
</TwoColumnStep>

<TwoColumnStep title="Install the Neon Auth SDK">
  <LeftContent>

Install the Neon SDK into your Next.js app.

<details>
<summary>_If you don't have a Next.js project_</summary>
```bash
npx create-next-app@latest my-app --yes
cd my-app
```
</details>
  </LeftContent>
  <RightCode label="Terminal">

```bash
npm install @neondatabase/neon-js
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Set up environment variables">
  <LeftContent>

Create a `.env` file in your project root and add your Auth URL:

<Admonition type="note">
Replace the URL with your actual Auth URL from the Neon Console.
</Admonition>

  </LeftContent>
  <RightCode label=".env">

```bash
NEON_AUTH_BASE_URL=https://ep-xxx.neonauth.us-east-1.aws.neon.tech/neondb/auth
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Add Neon Auth styles">
  <LeftContent>

Import the Neon Auth UI styles in your `app/globals.css` file. Add this line at the top of the file:

  </LeftContent>
  <RightCode label="app/globals.css">

```css
@import "tailwindcss";
@import "@neondatabase/neon-js/ui/css"; // [!code ++]

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Configure the auth client">
  <LeftContent>

Create a `lib/auth/client.ts` file to initialize the auth client:

  </LeftContent>
  <RightCode label="lib/auth/client.ts">

```typescript
import { createAuthClient } from '@neondatabase/neon-js/auth/next';

export const authClient = createAuthClient();
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Set up the API route">
  <LeftContent>

Create an API route to handle authentication requests. Create `app/api/auth/[...path]/route.ts`:

  </LeftContent>
  <RightCode label="app/api/auth/[...path]/route.ts">

```typescript
import { authApiHandler } from '@neondatabase/neon-js/auth/next';

export const { GET, POST } = authApiHandler();
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Create the Auth Provider">
  <LeftContent>

Create a provider component to wrap your application with authentication context. Create `app/providers.tsx`:

  </LeftContent>
  <RightCode label="app/providers.tsx">

```tsx
'use client';

import { NeonAuthUIProvider } from '@neondatabase/neon-js/auth/react/ui';
import { authClient } from '@/lib/auth/client';
import { useRouter } from 'next/navigation';

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const router = useRouter();

  return (
    <NeonAuthUIProvider
      authClient={authClient}
      navigate={router.push}
      replace={router.replace}
      onSessionChange={() => {
        router.refresh();
      }}
      emailOTP
      redirectTo="/"
      social={{
        providers: ['google', 'github'],
      }}
    >
      {children}
    </NeonAuthUIProvider>
  );
}
```

  </RightCode>
</TwoColumnStep>

<Admonition type="note">
Google OAuth works with shared credentials for development. GitHub OAuth requires custom credentials to be configured. See [Set up OAuth](/docs/auth/guides/setup-oauth) for details.
</Admonition>

<TwoColumnStep title="Wrap your app with the provider">
  <LeftContent>

Update `app/layout.tsx` to use the `AuthProvider`:

  </LeftContent>
  <RightCode label="app/layout.tsx">

```tsx
import type { Metadata } from 'next';
import { Geist, Geist_Mono } from 'next/font/google';
import { AuthProvider } from '@/app/providers'; // [!code ++]
import './globals.css';

const geistSans = Geist({
  variable: '--font-geist-sans',
  subsets: ['latin'],
});

const geistMono = Geist_Mono({
  variable: '--font-geist-mono',
  subsets: ['latin'],
});

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body className={`${geistSans.variable} ${geistMono.variable} antialiased`}>
        <AuthProvider> {children} </AuthProvider> // [!code ++]
      </body>
    </html>
  );
}
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Create the Auth page">
  <LeftContent>

Create a page to handle authentication views (sign in, sign up, etc.). Create `app/auth/[path]/page.tsx`:

  </LeftContent>
  <RightCode label="app/auth/[path]/page.tsx">

```tsx
import { AuthView } from '@neondatabase/neon-js/auth/react/ui';

export const dynamicParams = false;

export default async function AuthPage({ params }: { params: Promise<{ path: string }> }) {
  const { path } = await params;

  return (
    <main className="container mx-auto flex grow flex-col items-center justify-center gap-3 self-center p-4 md:p-6">
      <AuthView path={path} />
    </main>
  );
}
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Create the Account page">
  <LeftContent>

Create a page for user account management. Create `app/account/[path]/page.tsx`:

  </LeftContent>
  <RightCode label="app/account/[path]/page.tsx">

```tsx
import { AccountView } from '@neondatabase/neon-js/auth/react/ui';
import { accountViewPaths } from '@neondatabase/neon-js/auth/react/ui/server';

export const dynamicParams = false;

export function generateStaticParams() {
  return Object.values(accountViewPaths).map((path) => ({ path }));
}

export default async function AccountPage({ params }: { params: Promise<{ path: string }> }) {
  const { path } = await params;

  return (
    <main className="container p-4 md:p-6">
      <AccountView path={path} />
    </main>
  );
}
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Protect your routes">
  <LeftContent>

There are two approaches to protect your routes:

1. **Component-level protection**: Use `SignedIn` and `RedirectToSignIn` components directly in your page components
2. **Middleware-based protection**: Use Next.js middleware with a route matcher to protect entire route segments

Choose the approach that best fits your use case - middleware is ideal for protecting entire route segments, while component-level checks offer more granular control within pages.

  </LeftContent>
  <RightCode label="Choose your approach">

<Tabs labels={["Component-level (app/page.tsx)", "Middleware (proxy.ts)"]}>

<TabItem>

Use `SignedIn` and `RedirectToSignIn` components to protect pages at the component level. This performs authentication checks directly within the page component.

```tsx
'use client';

import { SignedIn, RedirectToSignIn, UserButton } from '@neondatabase/neon-js/auth/react/ui';
import { authClient } from '@/lib/auth/client';

export default function Home() {
  const { data: session } = authClient.useSession();

  return (
    <div className="bg-zinc-50 flex min-h-screen items-center justify-center font-sans dark:bg-black">
      <SignedIn>
        <main className="flex flex-col items-center justify-center gap-8 text-center">
          <h1 className="dark:text-zinc-50 text-3xl font-semibold tracking-tight text-black">
            Welcome{session?.user?.name ? `, ${session.user.name}` : ''}!
          </h1>
          <p className="text-zinc-600 dark:text-zinc-400 text-lg">
            You&apos;re successfully authenticated.
          </p>

          {session?.user && (
            <div className="border-zinc-200 dark:border-zinc-800 dark:bg-zinc-900 rounded-lg border bg-white p-6 shadow-sm">
              <div className="space-y-3 text-left">
                <div>
                  <p className="text-zinc-500 dark:text-zinc-400 text-sm">Email</p>
                  <p className="text-zinc-900 dark:text-zinc-50 mt-1 font-medium">
                    {session.user.email}
                  </p>
                </div>
                {session.user.name && (
                  <div>
                    <p className="text-zinc-500 dark:text-zinc-400 text-sm">Name</p>
                    <p className="text-zinc-900 dark:text-zinc-50 mt-1 font-medium">
                      {session.user.name}
                    </p>
                  </div>
                )}
              </div>
            </div>
          )}

          <UserButton />
        </main>
      </SignedIn>
      <RedirectToSignIn />
    </div>
  );
}
```

</TabItem>

<TabItem>

Use Next.js middleware to protect routes at the edge before they reach your page components. Create a `proxy.ts` file in your project root:

```typescript
import { neonAuthMiddleware } from '@neondatabase/neon-js/auth/next';

export default neonAuthMiddleware({
  loginUrl: '/auth/sign-in',
  authBaseUrl: process.env.NEON_AUTH_BASE_URL!,
});

export const config = {
  matcher: [
    '/only-for-authenticated-users/:path*',
    // Add more protected routes here
    '/((?!_next/static|_next/image|favicon.ico|).*)', // Exclude static files from middleware
  ],
};
```

Then create a page at `app/only-for-authenticated-users/page.tsx`. Since the middleware handles authentication, this page doesn't need `SignedIn` or `RedirectToSignIn` components - unauthenticated users are redirected before reaching the page.

```tsx
'use client';

import { authClient } from '@/lib/auth/client';
import Link from 'next/link';

export default function ProtectedPage() {
  const { data: session } = authClient.useSession();

  return (
    <div className="bg-zinc-50 flex min-h-screen items-center justify-center font-sans dark:bg-black">
      <main className="flex flex-col items-center justify-center gap-8 text-center">
        <h1 className="dark:text-zinc-50 text-3xl font-semibold tracking-tight text-black">
          Protected by Middleware
        </h1>
        <p className="text-zinc-600 dark:text-zinc-400 text-lg">
          This page is protected using Next.js middleware.
        </p>
        <p className="text-zinc-600 dark:text-zinc-400">
          If you&apos;re seeing this, you&apos;re authenticated as{' '}
          <span className="dark:text-zinc-50 text-zinc-900 font-medium">
            {session?.user?.email}
          </span>
        </p>
        <Link
          href="/"
          className="bg-zinc-900 hover:bg-zinc-800 dark:bg-zinc-100 dark:text-zinc-900 dark:hover:bg-zinc-200 rounded-lg px-4 py-2 text-white"
        >
          Back to Home
        </Link>
      </main>
    </div>
  );
}
```

</TabItem>

</Tabs>

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="Start your app">
  <LeftContent>

Start the development server, then open `http://localhost:3000`.

If you're using middleware protection, you can test the protected route at `http://localhost:3000/only-for-authenticated-users`.

  </LeftContent>
  <RightCode label="Terminal">

```bash
npm run dev
```

  </RightCode>
</TwoColumnStep>

<TwoColumnStep title="See your users in the database">
  <LeftContent>

As users sign up, their profiles are stored in your Neon database in the `neon_auth.user` table.

Query your users table in the SQL Editor to see your new users:

  </LeftContent>
  <RightCode label="SQL Editor">

```sql
SELECT * FROM neon_auth.user;
```

  </RightCode>
</TwoColumnStep>

</TwoColumnLayout>

## Next steps

- [Add email verification](/docs/auth/guides/email-verification)
- [Learn how to branch your auth](/docs/auth/branching-authentication)
